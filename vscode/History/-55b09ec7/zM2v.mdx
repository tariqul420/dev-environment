export const metadata = {
  title: 'Deployment Guide for Express.js Application on Hostinger VPS',
  description: 'Step-by-step guide to deploying an Express.js project (JavaScript or TypeScript) on Hostinger VPS with PM2, Nginx, HTTPS via Certbot, and GitHub CI setup.',
  keywords: [
    'Express.js VPS deployment',
    'Hostinger Express.js guide',
    'Deploy Express.js with PM2',
    'Express.js TypeScript deployment',
    'Nginx Express.js config',
    'Production Express.js hosting',
    'Secure Express.js deployment',
    'Ubuntu Express.js deployment',
    'Express.js Certbot HTTPS',
    'Express.js deployment tutorial',
  ],
  openGraph: {
    title: 'Deployment Guide for Express.js Application on Hostinger VPS',
    description: 'A complete walkthrough for deploying your Express.js (JavaScript/TypeScript) project on Hostinger VPS using Nginx, PM2, and HTTPS via Letâ€™s Encrypt.',
    url: '[https://yourdomain.com/blogs/express-js-deploy-in-vps](https://yourdomain.com/blogs/express-js-deploy-in-vps)',
    siteName: 'Tariqul Dev Blog',
    locale: 'en_US',
    type: 'article',
  },
};

# Deployment Guide for Express.js Application on Hostinger VPS

This guide helps you deploy an **Express.js** project (JavaScript or TypeScript, with or without Prisma) on a **Hostinger VPS** using **Ubuntu**, **PM2**, **Nginx**, and **Letâ€™s Encrypt (HTTPS)**.

---

## Prerequisites

- Hostinger VPS (Ubuntu 22.04+)
- Domain (e.g. `yourdomain.com`) pointed via DNS to VPS
- SSH access to VPS
- GitHub repo with your Express.js project
- SSH client (Terminal or PuTTY)
- Node.js v18+
- Basic knowledge of Linux shell

## Step 1: Connect & Update Server

```bash
ssh root@your-vps-ip
sudo apt update && sudo apt upgrade -y
```

---

## Step 2: Install Required Software

```bash
# Node.js
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt install -y nodejs

# Nginx
sudo apt install nginx -y
sudo systemctl enable nginx
sudo service nginx status

# PM2
sudo npm install -g pm2
pm2 startup

# Git
sudo apt install git -y

# Certbot
sudo apt install python3-certbot-nginx -y

# Firewall
sudo ufw enable
sudo ufw allow 'Nginx Full'
sudo ufw allow OpenSSH
```

## Step 1: Install Required Software:

- Node.js:

```bash
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt-get install -y nodejs
```

- Nginx:

```bash
sudo apt install nginx -y
sudo systemctl enable nginx
sudo service nginx status
```

- PM2:

```bash
sudo npm install -g pm2
sudo pm2 startup
```

- Git:

```bash
sudo apt install git -y
```

- Verify that all required softwares are installed:

```bash
nginx -v
node -v
npm -v
git --version
pm2 --version
```

- Verify Web Server Ports are Open and Allowed through Firewall:

```bash
sudo ufw status verbose
```

- Firewall Setup:

```bash
sudo ufw enable
sudo ufw allow 'Nginx Full'
sudo ufw allow OpenSSH
```

---

---

## Step 3: Point Domain to VPS

Go to your domain provider's DNS settings:

| Type | Name | Value         |
| ---- | ---- | ------------- |
| A    | @    | your VPS IPv4 |
| A    | www  | your VPS IPv4 |
| AAAA | @    | your VPS IPv6 |
| AAAA | www  | your VPS IPv6 |

---

## ğŸ“ Step 4: Clone Project from GitHub

```bash
mkdir -p ~/apps && cd ~/apps
git clone git@github.com:yourusername/your-repo.git
cd your-repo
```

If private repo:

```bash
ssh-keygen -t ed25519 -C "your_email@example.com"
cat ~/.ssh/id_ed25519.pub
```

Add this key to GitHub > Settings > Deploy Keys.

---

## Step 5: Configure Nginx

Delete default config:

```bash
sudo rm /etc/nginx/sites-enabled/default
```

Create config:

```bash
sudo nano /etc/nginx/sites-available/yourdomain.com
```

Paste:

```nginx
server {
  listen 80;
  server_name yourdomain.com www.yourdomain.com;

  location /api/ {
    proxy_pass http://localhost:3000/;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_set_header Host $host;
    proxy_cache_bypass $http_upgrade;
  }
}
```

Enable it:

```bash
sudo ln -s /etc/nginx/sites-available/yourdomain.com /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl restart nginx
```

---

## ğŸ§© Step 6: Prepare Express Project

```bash
cd ~/apps/your-repo
nano .env     # if needed
npm install
npm run build # if using TypeScript or Prisma
```

---

## ğŸ§¾ Step 7: Create PM2 Ecosystem File

```bash
nano ecosystem.config.js
```

TypeScript Example:

```js
module.exports = {
  apps: [
    {
      name: 'express-app',
      script: 'dist/server.js',
    },
  ],
};
```

JavaScript Example:

```js
module.exports = {
  apps: [
    {
      name: 'express-app',
      script: 'src/server.js',
    },
  ],
};
```

Start and save:

```bash
pm run build     # if TypeScript
pm run prisma:generate # if using Prisma
pm run prisma:migrate  # if using Prisma

pm2 start ecosystem.config.js
pm2 save
pm2 status
```

---

## ğŸ”’ Step 8: Secure with HTTPS (Certbot)

```bash
sudo certbot --nginx -d yourdomain.com -d www.yourdomain.com
sudo nginx -t && sudo systemctl reload nginx
sudo systemctl enable certbot.timer
sudo certbot renew --dry-run
```

---

## ğŸ” Pulling Updates from GitHub

```bash
cd ~/apps/your-repo
git pull origin main
npm install
npm run build
pm2 reload express-app
```

---

## ğŸ Done!

Your Express.js app is now live with HTTPS, running via PM2, and served by Nginx.

You can access it at: [https://yourdomain.com](https://yourdomain.com)

Happy deploying! ğŸš€
