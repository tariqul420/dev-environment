export const metadata = {
  title: 'Deployment Guide for Next.js Application on Hostinger VPS',
  description: 'Step-by-step guide to deploying a Next.js 14+ App Router project on Hostinger VPS. Learn how to configure PM2, Nginx, and secure your setup.',
  keywords: [
    'Next.js VPS deployment',
    'Hostinger Next.js guide',
    'Deploy Next.js with PM2',
    'Next.js App Router VPS setup',
    'Nginx Next.js config',
    'Production Next.js hosting',
    'Secure Next.js deployment',
    'Ubuntu Next.js deployment',
    'Next.js server-side deployment',
    'Next.js deployment tutorial',
  ],
  openGraph: {
    title: 'Deployment Guide for Next.js Application on Hostinger VPS',
    description: 'A detailed deployment guide for hosting your production-grade Next.js application on Hostinger VPS using Ubuntu, PM2, and Nginx.',
    url: '[https://yourdomain.com/blogs/next-js-deploy-in-vps](https://yourdomain.com/blogs/next-js-deploy-in-vps)',
    siteName: 'Tariqul Dev Blog',
    locale: 'en_US',
    type: 'article',
  },
};

# Deployment Guide for Next.js Application on Hostinger VPS

> Host your Next.js 14+ App Router project on Hostinger VPS with NGINX, PM2, and HTTPS. Secure and production-ready.

## ‚úÖ Prerequisites

- Hostinger VPS (Ubuntu 22.04+)
- Domain (e.g. `yourdomain.com`)
- GitHub repo with your Next.js project
- Node.js v20+ and NGINX installed

---

## Step 1: Connect & Update Server

```bash
ssh root@your-vps-ip
sudo apt update && sudo apt upgrade -y
```

---

## Step 2: Install Required Software

```bash
# Node.js
curl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -
sudo apt install -y nodejs

# Nginx
sudo apt install nginx -y
sudo systemctl enable nginx
sudo service nginx status

# PM2
sudo npm install -g pm2
pm2 startup

# Git
sudo apt install git -y

# Certbot
sudo apt install python3-certbot-nginx -y

# Firewall
sudo ufw enable
sudo ufw allow 'Nginx Full'
sudo ufw allow OpenSSH
```

---

## üåê Step 2: Point Domain to VPS

Set DNS A/AAAA records:

| Type | Name | Value    |
| ---- | ---- | -------- |
| A    | @    | VPS IPv4 |
| A    | www  | VPS IPv4 |

---

## üìÅ Step 3: Clone Next.js Project

```bash
mkdir -p ~/apps && cd ~/apps
git clone git@github.com:yourusername/your-next-app.git
cd your-next-app
```

Set environment variables:

```bash
nano .env
```

Install and build:

```bash
npm install
npm run build
```

---

## üßæ Step 4: Configure PM2 for Next.js

Create `ecosystem.config.js`:

```js
module.exports = {
  apps: [
    {
      name: 'next-app',
      script: './node_modules/next/dist/bin/next',
      args: 'start -p 3000',
      env: {
        NODE_ENV: 'production',
      },
    },
  ],
};
```

Start and save:

```bash
pm2 start ecosystem.config.js
pm2 save
pm2 status
```

---

## üåç Step 5: Configure NGINX

```bash
sudo nano /etc/nginx/sites-available/next-app
```

Paste config:

```nginx
server {
  listen 80;
  server_name yourdomain.com www.yourdomain.com;

  location / {
    proxy_pass http://localhost:3000;
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection 'upgrade';
    proxy_set_header Host $host;
    proxy_cache_bypass $http_upgrade;
  }
}
```

Enable and test:

```bash
sudo ln -s /etc/nginx/sites-available/next-app /etc/nginx/sites-enabled/
sudo nginx -t
sudo systemctl restart nginx
```

---

## üîê Step 6: Setup HTTPS with Certbot

```bash
sudo apt install python3-certbot-nginx -y
sudo certbot --nginx -d yourdomain.com -d www.yourdomain.com

# Reload and verify
sudo nginx -t
sudo systemctl reload nginx

# Auto-renew
sudo systemctl enable certbot.timer
sudo certbot renew --dry-run
```

---

## üîÅ Step 7: Deploy Updates

```bash
cd ~/apps/your-next-app
git pull origin main
npm install
npm run build
pm2 reload next-app
```

---

## ‚úÖ You‚Äôre Live!

- Next.js app runs on PM2
- Served via NGINX reverse proxy
- HTTPS enabled with Certbot

üéâ Congratulations on a secure, production-ready deployment!
