generator client {
  provider = "prisma-client-js"
  output   = "./generated/prisma"
  binaryTargets = ["native", "debian-openssl-3.0.x", "debian-openssl-1.1.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
id String @id @default(cuid())
email String @unique
links Link[]
createdAt DateTime @default(now())
}

model Link {
id String @id @default(cuid())
short String @unique
targetUrl String
userId String?
user User? @relation(fields: [userId], references: [id])
clicks Click[]
createdAt DateTime @default(now())
}


model Click {
id String @id @default(cuid())
linkId String
link Link @relation(fields: [linkId], references: [id])
ts DateTime @default(now())
referrer String?
country String?
uaHash String?
ipHash String?
}