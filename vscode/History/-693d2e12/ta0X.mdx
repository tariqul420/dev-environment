---
title: 'Deployment and Backup Guide for MongoDB Database on Hostinger VPS'
description: 'Step-by-step guide to install, secure, and automate MongoDB backups on Hostinger VPS with optional AWS S3 support.'
tags: [MongoDB, Ubuntu, VPS, Hostinger, Backup, S3, Crontab]
published: true
---

# Deployment and Backup Guide for MongoDB Database on Hostinger VPS

## Overview

This guide walks you through deploying MongoDB on a Hostinger VPS (Ubuntu 22.04+) and setting up an automated backup system. It configures hourly backups for the `database_name` database and retains a maximum of 5 backups locally or optionally uploads them to AWS S3.

## Prerequisites

- **Hostinger VPS** (Ubuntu 22.04 or later)
- **MongoDB installed**
- **Environment variables**: MongoDB username and password
- **Optional**: AWS S3 bucket + AWS CLI (for offsite backup)

## Step 0: Get Access to Remote Server

### Log in to VPS:

```bash
ssh root@your-vps-ip
```

### Update System:

```bash
sudo apt update && sudo apt upgrade -y
```

---

## Step 1: Install and Configure MongoDB

### 1.1 Install MongoDB and Enable Service

```bash
sudo apt-get install gnupg curl
curl -fsSL https://www.mongodb.org/static/pgp/server-8.0.asc | \
   sudo gpg -o /usr/share/keyrings/mongodb-server-8.0.gpg \
   --dearmor
echo "deb [ arch=amd64,arm64 signed-by=/usr/share/keyrings/mongodb-server-8.0.gpg ] https://repo.mongodb.org/apt/ubuntu noble/mongodb-org/8.0 multiverse" | sudo tee /etc/apt/sources.list.d/mongodb-org-8.0.list
sudo apt-get update
sudo apt-get install -y mongodb-org
sudo systemctl start mongod
sudo systemctl enable mongod
```

### 1.2 Secure MongoDB

#### Create an Admin User:

```bash
mongosh
use admin
db.createUser({user: "username" , pwd: passwordPrompt() , roles: ["root"]})
show users
```

#### Create Application Database User:

```bash
use database_name
db.createUser({user: "username", pwd: passwordPrompt(), roles:[{role:"readWrite", db:"database_name"}]})
show users
exit
```

#### Enable Authentication:

```bash
sudo nano /etc/mongod.conf
```

Add or uncomment:

```yaml
security:
  authorization: enabled
```

---

## Step 2: Configure MongoDB for Production

### Limit Bind IP:

```bash
sudo nano /etc/mongod.conf
```

Inside `net`:

```yaml
net:
  bindIp: 127.0.0.1
```

### Set Up a Firewall:

```bash
sudo ufw enable
sudo ufw allow 80
sudo ufw allow 443
sudo ufw allow 22
sudo ufw deny 27017
```

---

## Step 3: Setup MongoDB Backup Script

### Create Backup Directory

```bash
mkdir -p ~/backups/mongodb
```

### Local Backup Script

`~/backups/mongodb_backup_database_name.sh`:

```bash
#!/bin/bash
BACKUP_DIR=~/backups/mongodb
DB_NAME=database_name
TIMESTAMP=$(date +%F-%H-%M-%S)
BACKUP_NAME="backup-$DB_NAME-$TIMESTAMP.gz"

mongodump --db $DB_NAME --authenticationDatabase database_name -u database_user -p your_secure_password --archive=$BACKUP_DIR/$BACKUP_NAME --gzip

ls -t $BACKUP_DIR/backup-$DB_NAME-*.gz | tail -n +6 | xargs -I {} rm {}
```

Make executable:

```bash
chmod +x ~/backups/mongodb_backup_database_name.sh
```

### [Optional] AWS S3 Backup Script

Ensure AWS CLI is installed:

```bash
aws configure
```

Add S3 upload logic:

```bash
#!/bin/bash
BACKUP_DIR=~/backups/mongodb
DB_NAME=database_name
TIMESTAMP=$(date +%F-%H-%M-%S)
BACKUP_NAME="backup-$DB_NAME-$TIMESTAMP.gz"
S3_BUCKET="s3://database_name-mongodb-backups"

mongodump --db $DB_NAME --authenticationDatabase database_name -u database_user -p your_secure_password --archive=$BACKUP_DIR/$BACKUP_NAME --gzip

aws s3 cp $BACKUP_DIR/$BACKUP_NAME $S3_BUCKET/$BACKUP_NAME

ls -t $BACKUP_DIR/backup-$DB_NAME-*.gz | tail -n +6 | xargs -I {} rm {}

aws s3 ls $S3_BUCKET/ | awk '{print $4}' | grep "backup-$DB_NAME" | sort -r | tail -n +6 | xargs -I {} aws s3 rm $S3_BUCKET/{}
```

---

## Step 4: Automate Backups with Cron

```bash
crontab -e
```

Add:

```bash
0 * * * * ~/backups/mongodb_backup_database_name.sh
```

---

## Step 5: Test Your Configuration

### MongoDB Status:

```bash
sudo systemctl status mongod
```

### Backup Check:

```bash
ls ~/backups/mongodb
```

### Access MongoDB:

```bash
mongosh --port 27017 --authenticationDatabase "database_name" -u "username" -p "password"
```

### Test Application Connection:

```bash
mongodb://username:password@your_server_ip:27017/database_name
```

---

## Step 6: Enable Remote Access (Compass)

Edit bind IP:

```bash
sudo nano /etc/mongod.conf
```

Set:

```yaml
net:
  port: 27017
  bindIp: 0.0.0.0
```

Restart MongoDB:

```bash
sudo systemctl restart mongod
```

Connect from Compass:

```bash
mongodb://username:password@your_server_ip:27017/database_name
```

---

## Conclusion

Youâ€™ve successfully installed and configured MongoDB for production use on Hostinger VPS, with secure access and hourly automated backups â€” both local and optionally on AWS S3. ðŸŽ‰
